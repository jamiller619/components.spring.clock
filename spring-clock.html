<template id="spring-clock">
  <style>@keyframes a{0%{opacity:0}}@keyframes b{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes c{0%{transform:scale(0)}}@keyframes d{0%{transform:scale(1)}to{transform:scale(.5)}}.spring-clock{z-index:1;transform:scale(1);animation:c .5s .1s backwards cubic-bezier(.25,.46,.18,1.3)}.spring-clock .dial,.spring-clock .face,.spring-clock .marker{position:absolute;width:100%;height:100%;transform-origin:center}.spring-clock .dial,.spring-clock .face{z-index:1}.spring-clock .dial{border-radius:50%;background-color:#161515;animation:d .5s .1s both cubic-bezier(.25,.46,.18,1.3)}.spring-clock .face{opacity:1;animation:a .5s .6s backwards}.spring-clock .marker{position:absolute;top:50%;left:50%;width:1.5%;height:1.5%;margin:-2px;border-radius:50%;background-color:#161515}.spring-clock .hours-container,.spring-clock .minute-hand-container,.spring-clock .minutes-container{width:100%;height:100%;transition:transform 1s cubic-bezier(.74,.15,.04,.96)}.spring-clock .minutes-container{mix-blend-mode:multiply}.spring-clock .hours{animation:b 43200s linear infinite}.spring-clock .minute-hand,.spring-clock .minutes{animation:b 3600s linear infinite}.spring-clock .hours,.spring-clock .minutes{width:100%;height:100%;-webkit-mask-image:url(data:image/png;base64,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);-webkit-mask-size:115%;-webkit-mask-position:50%;border-radius:50%;overflow:hidden}.spring-clock .minute-hand-container,.spring-clock .minutes-container{margin-top:-100%}.spring-clock .minute-hand{width:4px;height:50%;margin-left:calc(50% - 2px);transform-origin:bottom;box-shadow:-1px 0 15px 0 rgba(0,0,0,.2)}</style>
</template>
<script>(function() {
  var importDoc = document.currentScript.ownerDocument;

  window.customElements.define('spring-clock', class extends HTMLElement {
    constructor() {
      super();
      this.root = this.attachShadow({mode: 'open'});
    }

    connectedCallback() {
      var my = this;
      my.options = {
        size: my.hasAttribute('data-size') ? +my.getAttribute('data-size') : 33,
        sizeUnits: my.hasAttribute('data-size-unit') ? my.getAttribute('data-size-unit') : 'vmin',
        startDate: my.hasAttribute('data-start-date') ? new Date(my.getAttribute('data-start-date')) : new Date(),
        speed: my.hasAttribute('data-speed') ? +my.getAttribute('data-speed') : 1,
        colors: {
          minute: my.hasAttribute('data-color-minute') ? my.getAttribute('data-color-minute') : '#f12177',
          hour: my.hasAttribute('data-color-hour') ? my.getAttribute('data-color-hour') : '#ad00e9'
        }
      };

      my.render();
    }

    render() {
      var my = this;
      var template = importDoc.querySelector('#spring-clock');
      var clone = document.importNode(template.content, true);
      var container = document.createElement('div');
      var minutesContainer = document.createElement('div');
      var minutes = document.createElement('div');
      var minuteHandContainer = document.createElement('div');
      var minuteHand = document.createElement('div');
      var hoursContainer = document.createElement('div');
      var hours = document.createElement('div');
      var dial = document.createElement('div');
      var face = document.createElement('div');
      var degrees = my.getDegrees(my.options.startDate);
      
      minutes.className = 'minutes';
      minuteHand.className = 'minute-hand';
      hours.className = 'hours';
      minutesContainer.className = 'minutes-container';
      hoursContainer.className = 'hours-container';
      minuteHandContainer.className = 'minute-hand-container';
      dial.className = 'dial';
      face.className = 'face';

      minutesContainer.style.transform = minuteHandContainer.style.transform = 'rotate(' + (degrees.minute - 180) + 'deg)';
      hoursContainer.style.transform = 'rotate(' + (degrees.hour - 180) + 'deg)';

      minutes.style.backgroundColor = minuteHand.style.backgroundColor = my.options.colors.minute;
      hours.style.backgroundColor = my.options.colors.hour;

      face.appendChild(my.createMarkers());

      minutesContainer.appendChild(minutes);
      minuteHandContainer.appendChild(minuteHand);
      hoursContainer.appendChild(hours);

      container.appendChild(face);
      container.appendChild(dial);
      container.appendChild(hoursContainer);
      container.appendChild(minutesContainer);
      container.appendChild(minuteHandContainer);

      container.className = 'spring-clock';
      container.style.width = container.style.height = my.options.size + my.options.sizeUnits;

      clone.appendChild(container);
      my.root.appendChild(clone);

      window.setTimeout(function() {
        minutesContainer.style.transform = minuteHandContainer.style.transform = 'rotate(' + degrees.minute + 'deg)';
        hoursContainer.style.transform = 'rotate(' + degrees.hour + 'deg)';
      }, 10);
    }

    createMarkers() {
      var i = 0, l = 12, el, markers = document.createDocumentFragment();
      for(; i < l; i++) {
        el = document.createElement('div');
        el.className = 'marker';
        el.style.transform = 'rotate(' + (i * 360 / 12) + 'deg) translate(' + (this.options.size / 2 * .75) + this.options.sizeUnits + ')';
        markers.appendChild(el);
      }
      return markers;
    }

    getDegrees(date) {
      var d = date || new Date();
      var minutes = (d.getSeconds() / 60 + d.getMinutes()) / 60;
      var hours = (d.getHours() + d.getMinutes() / 60) / 12;
      return {
        minute: (minutes * 360) % 360,
        hour: (hours * 360) % 360
      };
    }
  });
})();</script>